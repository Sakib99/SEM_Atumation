# SEM AUTOMATION

## Steps for running the pipeline:
  
  1. SEM SQL Runner
  2. SEM BQ Target Runner
  3. SEM BQ Control Runner
  4. SEM Match Runner
  5. SEM Historical Automation Runner 
  6. SEM Calculate Runner
  7. SEM Historical Automation Runner

## Running Options:
#### The Pipeline could be run into two ways:
  1. Argo Pipeline (Synced With Google CloudBuild)
  2. Manual Run From CMD
### 1. Argo pipeline 
In the Argo project  under the section of template sem shared pipeline enter the parameters of the dates, dataset name and the environment and submit                 

### 2. Manual Run
   * Download this repository and check into the src folder 
   * Set Up a Python 3.7 version environment
   * Activate the environment if using conda
   * Run pip install -r requirements.txt
   * Make a file Credentials folder and paste the JSON formatted credential into it
   * Make the path GOOGLE_APPLICATION_CREDENTIALS to the 
	 JSON file.
   * Add the ENV path to the “env”
   * Run the steps sequentially listed on Section 1 and the corresponding python files listed on the src folder with parameters start date(monday), end date(sunday) , dataset name on GCP and the environment. Example: Python3 sem_sql_runner.py 2022-03-21 2022-03-27 DX_dev dev
                        
                         
## 3. CI/CD pipeline
	The git repo of the “sem_dis_automation” branch is synced with the google   cloud build trigger “Sem Trigger”. In case of creating a new trigger, make a branch and add it to the new trigger. The trigger is being generated by the git push command.
	Cloudbuild file: The cloudbuild.yml is used with the docker files in the dockerfiles directory.

